// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = "prisma://accelerate.prisma-data.net/?api_key=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlfa2V5IjoiODQ2ZTdmZWMtMTRiMi00NmFlLWJhNmYtZDdiMTg1NGU3YTcwIiwidGVuYW50X2lkIjoiOWQ5MDM4NTAwMTU2YjY0YWU0YWQxZDYwMjhjYzE2ZjkzNmEwOWJhZGVkMWUyMjA1Y2FkMGVjZDkyMTFjOWI5MCIsImludGVybmFsX3NlY3JldCI6ImNhY2E0NjE3LTQ2YjItNGI1ZS1iNDI2LThjOGRhNTQ2NzZhYSJ9.XFKfH9Of3cWBKoJapJ86ekdTEep3mM77vi8o5wt4sK4"
  directUrl = "postgresql://buyppy_ps_user:19kfH8gEOuhN0cYyhZ4ZyoFfFDNEoVc4@dpg-cqbhsdqju9rs7391lflg-a.oregon-postgres.render.com/buyppy_ps"
}

model Client {
  id         String   @id @default(uuid()) @map("id")
  document   String   @unique @map("document")
  phone      String   @map("phone")
  email      String   @unique @map("email")
  name       String   @map("name")
  password   String   @map("password")
  addressId  String   @unique @map("address_id")
  address    Address  @relation(fields: [addressId], references: [id])
  created_at DateTime @map("created_at")

  @@map("clients")
}

model Address {
  id      String  @id @default(uuid()) @map("id")
  street  String  @map("street")
  number  Int     @map("number")
  zipCode String  @map("zip_code")
  client  Client?

  @@map("address")
}

model Coupon {
  id                 String   @id @default(uuid()) @map("id")
  code               String   @unique @map("code")
  discountPercentage Float    @map("discount_percentage")
  expirationDate     DateTime @map("expiration_date")
  usageLimit         Int      @map("usage_limit")

  @@map("coupons")
}

model Product {
  id               String             @id @default(uuid()) @map("id")
  name             String             @map("name")
  code             String             @unique @map("code")
  cost             Float              @map("cost")
  price            Float              @map("price")
  promotionalPrice Float?             @map("promotional_price")
  category         String             @map("category")
  inventories      Inventory[]
  attributes       ProductAttribute[]

  @@map("products")
}

model ProductAttribute {
  id        String  @id @default(uuid()) @map("id")
  productId String  @map("product_id")
  key       String  @map("key")
  value     String  @map("value")
  product   Product @relation(fields: [productId], references: [id])

  @@map("product_attributes")
}

model Inventory {
  id        String  @id @default(uuid()) @map("id")
  productId String  @map("product_id")
  quantity  Int     @map("quantity")
  location  String? @map("location")

  product Product @relation(fields: [productId], references: [id])

  @@map("inventories")
}
